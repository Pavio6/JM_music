### 用户资料公开状态

#### 多表查询

1. INNER JOIN（内连接）：INNER JOIN 只返回两个表中满足连接条件的行，即只返回两个表中匹配的行。
2. LEFT JOIN（左连接）：LEFT JOIN 返回左表（FROM 子句中指定的第一个表）中的所有行，以及右表中满足连接条件的行。如果右表中没有与左表匹配的行，则右表的列将显示为
   NULL。
3. RIGHT JOIN（右连接）：RIGHT JOIN 与 LEFT JOIN 相反，它返回右表中的所有行，以及左表中满足连接条件的行。如果左表中没有与右表匹配的行，则左表的列将显示为
   NULL。

### 听歌时长统计

- 后端存储每天用户的听歌信息 当天时间 听歌时长 歌曲id 用户id 是否完整播放
- 听歌时长 == 歌曲id 完整播放
- 获取用户本月听歌数量
- 获取用户每日播放时长 统计用户每日播放排名前三的歌手
- 前端切换歌曲时 向后端发送请求

### security

### 播放队列

- 保存用户播放模式(单曲循环 顺序播放 随机播放)
- 如果用户当前是专辑播放 那么播放列表为整个专辑
- 如果用户当前是歌单播放 那么播放列表为整个歌单
- 如果用户当前是我的喜欢内的音乐播放 那么播放列表为我的喜欢的所有歌曲列表
- 如果是随机点了一首歌曲 那么播放列表为在上次播放列表中加入这首歌(默认加入到上次播放列表的最开头)
- 用户关闭了应用 重新启动需要得到数据库保存的播放队列(也就是上一次的播放队列)  包括播放模式

### 新歌榜 热歌榜 飙升榜

- 新歌榜 -> 增加权重算法（如：推广位加成）
    - 按发布时间降序 统计最近一周的歌曲 存入redis 每天删除 从数据库重新获取 如果最近一周没有歌曲 则直接按发布时间返回
- 热歌榜 -> 综合热度公式+时间衰减+实时更新
    - 按播放量排序 + 时间衰减
- 飙升榜 简单增量统计 -> 滑动窗口计算+趋势预测算法

### 轮播图

1. 添加轮播图信息时 不需要指定sort_order 后端根据数据库中当前最大的记录 自动为该轮播图信息的 sort_order + 1
    - 指定开始时间和结束时间 status 为上线
    - 查询轮播图信息时 查询 开始时间在当前时间之前 结束时间在当前时间之后的 并且status为上线的 根据sort_order 升序返回
